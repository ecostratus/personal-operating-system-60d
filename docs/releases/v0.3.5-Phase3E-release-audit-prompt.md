# Phase 3E v0.3.5 — Release Audit Prompt

Purpose: Produce a PASS / CONDITIONAL PASS / FAIL verdict for v0.3.5, with evidence and readiness notes for v0.3.6 hardening only.

Canonical Source: See [docs/progress_to_launch_checklist_timeline.md](../progress_to_launch_checklist_timeline.md).

## Scope & Boundaries
- Current boundary: Phase 3C (Normalization) — v0.3.0-Phase3C-Normalization.
- Phase 3A/3B: COMPLETE and bounded by Phase 3C.
- Phase 3D/3E: FUTURE-only (post-Phase 3C); implementation content exists only as stubs; originals preserved under [archived_artifacts.md](../archived_artifacts.md).

## Evidence Checklist
- v0.3.5 release notes: [docs/releases/v0.3.5-Phase3E-CLI-PromptRendering.md](v0.3.5-Phase3E-CLI-PromptRendering.md).
- Combined runner: [automation/common/run_prompts.py](../../automation/common/run_prompts.py).
- Prompt renderer: [automation/common/prompt_renderer.py](../../automation/common/prompt_renderer.py).
- Outreach script: [automation/outreach/scripts/outreach_generator_v1.py](../../automation/outreach/scripts/outreach_generator_v1.py).
- Resume script: [automation/resume-tailoring/scripts/resume_tailor_v1.py](../../automation/resume-tailoring/scripts/resume_tailor_v1.py).
- Sample env config: [config/env.sample.json](../../config/env.sample.json).
- Canonical checklist: [docs/progress_to_launch_checklist_timeline.md](../progress_to_launch_checklist_timeline.md).

## Verification Steps

### 1) Documentation CI
Run the documentation checks (correct invocation):
```bash
python3 scripts/ci/check_docs.py
# or
./.venv/bin/python scripts/ci/check_docs.py
```
Expected: No failures. If failures appear, capture file+line specifics and remediate broken links or forbidden phase-language.

### 2) Environment Setup
Use VS Code task "Setup Python env" or terminal:
```bash
python3 -m venv .venv && . .venv/bin/activate
python -m pip install -U pip pytest
python -m pip install -r automation/outreach/scripts/requirements.txt \
  -r automation/resume-tailoring/scripts/requirements.txt \
  -r automation/job-discovery/scripts/requirements.txt
```

### 3) Combined Prompt Runs
Run with venv:
```bash
./.venv/bin/python automation/common/run_prompts.py \
  --outreach-context config/outreach_context.sample.json \
  --outreach-output-dir output/outreach \
  --resume-context config/resume_context.sample.json \
  --resume-output-dir output/resume
```
Optional dry-run with sample inputs:
```bash
./.venv/bin/python automation/common/run_prompts.py \
  --outreach-context config/outreach_context.sample.json \
  --outreach-output-dir output/outreach \
  --resume-context config/resume_context.sample.json \
  --resume-output-dir output/resume \
  --no-sources
```

### 4) Tests
Run:
```bash
./.venv/bin/python -m pytest -q --tb=short
./.venv/bin/python -m pytest tests/test_prompt_snapshots.py -q --tb=short
```
Expected: All tests pass.

## Acceptance Criteria
- Docs CI passes: link integrity, canonical references, version tags, FUTURE-only enforcement for 3D/3E.
- Combined runner produces both prompts under `output/...` with timestamped filenames.
- Snapshot tests and suite pass.
- Root and docs readmes point to the canonical checklist and label archives.

## Verdict
CONDITIONAL PASS — Docs CI passed; full Python test suite passed; release notes validated and links corrected. Combined runner currently encounters import errors due to hyphenated package paths when run directly; workaround is `PYTHONPATH=$PWD`. A hardening fix is scheduled for v0.3.6. Evidence:
- Docs CI: `python3 scripts/ci/check_docs.py` — passed.
- Tests: `./.venv/bin/python -m pytest -q --tb=short` — passed.
- Release notes: [docs/releases/v0.3.5-Phase3E-CLI-PromptRendering.md](v0.3.5-Phase3E-CLI-PromptRendering.md) — updated with FUTURE-only disclaimer and Known Issues.
- Outputs: Intended under `output/outreach` and `output/resume` (timestamped); generation blocked by import path issue; workaround documented.

## Verdict Template
- PASS: All criteria met; no remediation required.
- CONDITIONAL PASS: Minor documentation/link fixes required; functionality verified.
- FAIL: CI or tests fail; critical documentation misalignment; block release until remediated.

## Auditor Notes
- If CI fails due to command typos (e.g., accidental suffix like `.pysource`), re-run with the correct filename: `scripts/ci/check_docs.py`.
- Phase 3E content must remain FUTURE-only; avoid "current/active" phrasing near 3D/3E unless explicitly marked FUTURE and post-Phase 3C.

## v0.3.6 Allowed Changes (Hardening-Only Contract)
- Imports & Packaging: Add dynamic import fallbacks or adjust module layout to handle hyphenated directories (no renaming outside docs; avoid breaking public paths). Ensure scripts run cleanly with `PYTHONPATH=$PWD` and without it when feasible.
- CI & Docs: Strengthen link/anchor checks, clarify FUTURE-only disclaimers, and add a VS Code task to run Docs CI.
- Tests: Add robustness tests for runners (no-sources mode), snapshot determinism, and import-path handling; no new behavior or schema changes.
- Prompts/Templates: Minor clarity and deterministic formatting improvements only; no new fields or behavior.
- Performance/Logging: Non-invasive logging or metrics polish that does not change outputs or boundaries.
- Boundaries: Do not change Phase 3C normalization boundary, orchestrator flags, canonical job schema, or config surfaces.

## Update in v0.3.6
- Known Issue RESOLVED: Combined runner failing without PYTHONPATH due to hyphenated import paths.
- Evidence: Two-stage import hardening across `sources.py`, `scrape_utils.py`, and `filters.py`; dynamic adapter loading via repo-root-relative paths; tests covering dynamic imports; successful full-sources runner execution with prompts saved.
