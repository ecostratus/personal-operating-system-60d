# v0.3.4 — Phase 3E: Prompt Rendering + Enriched Context Wiring

Note: Phase 3E content is FUTURE-only (post-Phase 3C) and not current. This document serves as a planning/historical stub aligned to the canonical checklist.

## Overview

This release documents a planned Phase 3E milestone (FUTURE-only) connecting deterministic enrichment to prompt rendering for outreach and resume tailoring. Enriched job fields (seniority, domain_tags, stack, skills) are passed into structured templates, enabling richer, more context-aware prompts without sacrificing determinism.

## Highlights

- Minimal renderer added (no external dependencies).
- Outreach and resume scripts build structured context from enriched job objects.
- Enrichment can be toggled on/off via `ENRICHMENT_ENABLED`.
- Extended enrichment coverage for cloud, ML, CI/CD, data-platform, and frameworks.
- New tests ensure domain tags (e.g., `cloud`, `ml`) appear end-to-end for matching roles.

## Changes

- `automation/common/prompt_renderer.py`:
  - Added `render_prompt(template_str, context)` helper.
- `automation/outreach/scripts/outreach_generator_v1.py`:
  - Builds prompt context from enriched jobs.
  - Renders `prompts/outreach/outreach_prompt_v1.md` with structured context.
- `automation/resume-tailoring/scripts/resume_tailor_v1.py`:
  - Builds prompt context including tailoring focus.
  - Renders `prompts/resume/resume_tailor_prompt_v1.md` with structured context.
- `config/env.sample.json`:
  - Added `ENRICHMENT_ENABLED` (default: true).
- Orchestrator:
  - Applies `enrich_job` conditionally based on `ENRICHMENT_ENABLED`.
- Docs:
  - Phase 3E enrichment → prompt contract documented.
- Tests:
  - Renderer unit tests.
  - Extended enrichment tests for expanded keywords.
  - Domain-tag end-to-end assertions.

## Upgrade Notes

- No breaking changes.
- To disable enrichment and revert to basic prompts, set:
  - `"ENRICHMENT_ENABLED": false` in your environment config.
- Ensure outreach/resume scripts point at the updated prompt files.

## Next

The next Phase 3E milestones will focus on:

- richer description-based heuristics
- behavior-level logging and metrics
- template variants by seniority, domain, and stack
- outreach and resume performance feedback loops
